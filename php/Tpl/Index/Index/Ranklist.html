<include file="Top" title="Ranklist"/>
<div id="mainlist" class="container">

<div id="ranktitle">Ranklist</div>
	<div class="container-fluid" style="background-color:#787676;">
	<div class="navbar-form">
		<div class="input-group navbar-left searchbar">
          <input type="text" id="searchinfo" class="form-control" placeholder="enter any words">
         <span class="input-group-addon" id="submitinfo">Search</span>
         </div>
	   <nav class="navbar-right">
	      <ul class="pagination" style="margin: 0">
	       <?php 
	       		$SearchUrl=U('Index/Index/Ranklist','','');
				$rear=$nowpage-1;
                $str='';
                if($info!=null)$str='&info='.$info;
                if($nowpage==1) echo'<li class="disabled"><a href="#">&laquo;</a></li>';
                else echo'<li><a href="'.$SearchUrl.'?page='.$rear.$str.'">&laquo;</a></li>';
           ?>
	       <?php
	          $str='';
              if($info!=null)$str='&info='.$info;
              if($pages<=5){
                for($i=1;$i<=$pages;$i++){
                if($i==$nowpage)echo'<li class="active"><a href="#">'.$i.'</a></li>';
                else echo'<li><a href="'.$SearchUrl.'?page='.$i.$str.'">'.$i.'</a></li>';   
                }
                }
                else{
                if($nowpage<=3)
                for($i=1;$i<=5;$i++){
                if($i==$nowpage)echo'<li class="active"><a href="#">'.$i.'</a></li>';
                else echo'<li><a href="'.$SearchUrl.'?page='.$i.$str.'">'.$i.'</a></li>';  
                }
                else if($pages-$nowpage<=2)
                for($i=$pages-4;$i<=$pages;$i++){
                if($i==$nowpage)echo'<li class="active"><a href="#">'.$i.'</a></li>';
                else echo'<li><a href="'.$SearchUrl.'?page='.$i.$str.'">'.$i.'</a></li>';   
                }
                else for($i=$nowpage-2;$i<=$nowpage+2;$i++){
                if($i==$nowpage)echo'<li class="active"><a href="#">'.$i.'</a></li>';
                else echo'<li><a href="'.$SearchUrl.'?page='.$i.$str.'">'.$i.'</a></li>';  
                }
                }
            ?>
	       <?php 
				$front=$nowpage+1;
            	$str='';
      			if($info!=null)$str='&info='.$info;
	            if($nowpage==$pages) echo'<li class="disabled"><a href="#">&raquo;</a></li>';
   	            else echo'<li><a href="'.$SearchUrl.'?page='.$front.$str.'">&raquo;</a></li>'
           ?>
	      </ul>
	    </nav>
	</div>
	</div>
	<table id="list" class="list">
		<tr>
			<th>Rank</th>
			<th>User Name</th>
			<th>Nick Name</th>
			<th>Individuality Signature</th>
			<th>Submit</th>
			<th>Solved</th>
			<th>Ratio</th>
		</tr>
		<foreach name="data" item="p" key="k">
		<tr>
			<td>{$k+1}</td>
			<td><a href="<?php echo "User?user=".$p['uid']?>">{$p.username}</a></td>
			<td>{$p.name}</td>
			<td>{$p.note}</td>
			<td>{$p.solved}</td>
			<td>{$p.submit}</td>
			<td><?php echo sprintf("%.2f", $p['solved']*1.0/$p['submit']*100).'%';?></td>
		</tr>
		</foreach>
	</table>
	<div class="container-fluid" style="margin:40px 0;">
	<div class="navbar-form">
	   <nav class="navbar-right">
	      <ul class="pagination" style="margin: 0">
	       <?php 
				$rear=$nowpage-1;
                $str='';
                if($info!=null)$str='&info='.$info;
                if($nowpage==1) echo'<li class="disabled"><a href="#">&laquo;</a></li>';
                else echo'<li><a href="'.$SearchUrl.'?page='.$rear.$str.'">&laquo;</a></li>';
           ?>
	       <?php
	          $str='';
              if($info!=null)$str='&info='.$info;
              if($pages<=5){
                for($i=1;$i<=$pages;$i++){
                if($i==$nowpage)echo'<li class="active"><a href="#">'.$i.'</a></li>';
                else echo'<li><a href="'.$SearchUrl.'?page='.$i.$str.'">'.$i.'</a></li>';   
                }
                }
                else{
                if($nowpage<=3)
                for($i=1;$i<=5;$i++){
                if($i==$nowpage)echo'<li class="active"><a href="#">'.$i.'</a></li>';
                else echo'<li><a href="'.$SearchUrl.'?page='.$i.$str.'">'.$i.'</a></li>';  
                }
                else if($pages-$nowpage<=2)
                for($i=$pages-4;$i<=$pages;$i++){
                if($i==$nowpage)echo'<li class="active"><a href="#">'.$i.'</a></li>';
                else echo'<li><a href="'.$SearchUrl.'?page='.$i.$str.'">'.$i.'</a></li>';   
                }
                else for($i=$nowpage-2;$i<=$nowpage+2;$i++){
                if($i==$nowpage)echo'<li class="active"><a href="#">'.$i.'</a></li>';
                else echo'<li><a href="'.$SearchUrl.'?page='.$i.$str.'">'.$i.'</a></li>';  
                }
                }
            ?>
	       <?php 
				$front=$nowpage+1;
            	$str='';
      			if($info!=null)$str='&info='.$info;
	            if($nowpage==$pages) echo'<li class="disabled"><a href="#">&raquo;</a></li>';
   	            else echo'<li><a href="'.$SearchUrl.'?page='.$front.$str.'">&raquo;</a></li>'
           ?>
	      </ul>
	    </nav>
	</div>
	</div>
	</div>
<link rel="stylesheet" href="__PUBLIC__/Css/Tabletpl.css" />
<link rel="stylesheet" href="__PUBLIC__/Css/Ranklist.css" />
<script type="text/javascript" src='__PUBLIC__/Js/LiSt.js'></script>
	<script>
	var SearchUrl="{:U('Index/Index/Ranklist','','')}";
	</script>
</body>
</html>